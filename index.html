<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>DOHMH New York City Restaurant Inspection Results</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Theme CSS -->
    <link href="css/agency.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"
            integrity="sha384-0s5Pv64cNZJieYFkXYOTId2HMA2Lfb6q2nAcx2n0RTLUnCAoTTsS0nKEO27XyKcY"
            crossorigin="anonymous"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"
            integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo"
            crossorigin="anonymous"></script>
    <![endif]-->

    <!--<meta charset="UTF-8">-->
    <!--<title>Project Assignment B</title>-->

    <style type="text/css">

        /* Visualization 1 - bar chart */
        @import url(css/v1.css);
        /* Visualization 2 - Wordcloud */
        @import url(css/tipsy.css);

        #xaxis .domain {
            fill:none;
            stroke:#000;
        }
        #xaxis text, #yaxis text {
            font-size: 18px;

    </style>

    <!-- load JS files -->
    <!-- load jquery <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script> -->
    <script src="javascript/jquery.min.js" type="text/javascript"></script>
    <script src="javascript/jquery-ui.min.js" type="text/javascript"></script>
    <!-- tooltip with jquery: http://bl.ocks.org/ilyabo/1373263 -->
    <script src="javascript/jquery.tipsy.js" type="text/javascript"></script>
    <!-- load D3.js for visualization <script src="https://d3js.org/d3.v3.min.js" type="text/javascript"></script> -->
    <script src="javascript/d3.v3.min.js" type="text/javascript"></script>
    <!-- load leaflet.js for map <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js" type="text/javascript"></script> -->
    <!-- can be disabled when using mapbox <script src="js/leaflet.js" type="text/javascript"></script>-->
    <!-- mapbox for nice tiles <script src="https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js" type="text/javascript"></script> -->
    <script src="javascript/mapbox.js" type="text/javascript"></script>
    <!-- load wordcloud -->
    <script src="javascript/d3.layout.cloud.js" type="text/javascript"></script>
    <!-- counting up numbers when scrolling by -->
    <script src="javascript/scrollMonitor.js" type="text/javascript"></script>

</head>
<!--<body>-->

<body id="page-top" class="index">

<!-- Navigation -->
<nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
            </button>
            <a class="navbar-brand page-scroll" href="#page-top">Start Bootstrap</a>
        </div>

        <!--Collect the nav links, forms, and other content for toggling-->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="hidden">
                    <a href="#page-top"></a>
                </li>
                <li>
                    <a class="page-scroll" href="#introduction">Introduction</a>
                </li>
                <li>
                    <a class="page-scroll" href="#dataoverview">Data Overview</a>
                </li>
                <li>
                    <a class="page-scroll" href="#visualization3">V3</a>
                </li>
                <li>
                    <a class="page-scroll" href="#visualization4">V4</a>
                </li>
            </ul>
        </div>

    </div>
    <!-- /.container-fluid -->
</nav>

<!-- Header -->
<header>
    <div class="container">
        <div class="intro-text">
            <div class="intro-lead-in">Social Data Analysis and Visualization</div>
            <div class="intro-heading">New York City Restaurant Inspection Results</div>
            <!--<a href="#services" class="page-scroll btn btn-xl">Tell Me More</a>-->
        </div>
    </div>
</header>

<section id="introduction">
    <div class="container">

        <h3>Introduction</h3>

        <br/>

        <p> The New York's New Restaurant Grading System assigns letter grades of A, B, or C depending on
            the number of health code violations recorded in a restaurant's most recent inspection. Restaurants are
            required to post a placard advertising the letter grade in their front window,
            so potential customers can take a look before entering.</p>

        <p>
            There has always been very comprehensive information available online about restaurant inspections
            and violations. But it is also known that few patrons actively seek out this information,
            and thus are in greater danger of contracting food-borne illness from an unclean restaurant.
            The most egregious violators are, of course, promptly shut down by health inspectors until they clean
            up their act. But the poor-performing restaurants that are not closed remain a possible threat to public
            health.
        </p>

        <p>
            <img src="img/opendata.jpg" alt="NYC Open Data" style="width:252px;height:100px;">
        </p>

        <p>
            In the context of the DTU course "Social data analysis and visualization", our group decided to work with
            the publicly available dataset of
            <a href="https://data.cityofnewyork.us/Health/DOHMH-New-York-City-Restaurant-Inspection-Results/rs6k-p7g6">
                "DOHMH New York City Restaurant Inspection Results"</a>, in order to gain
            insight into the quality of NYC restaurants' services. The selected dataset provides restaurant inspections,
            violations, grades and adjudication information.
            Taking advantage of the above tools, we would like to give our stakeholders a complete picture of the
            violations that have been recorded in recent years, and also help them to find the best restaurant
            in terms of hygiene without ignoring their taste preferences.
        </p>

        <p>A more in depth analysis regarding the data can be found in a iPython explainer notebook.</p>


    </div>
</section>

<section id="dataoverview">
    <div class="container">

        <h3>Data Overview</h3>

        <br/>
        Our dataset includes all NYC restaurant violation records from 2012 (423,026 Rows).

        <p></p>

        Its total size is 154.4MB. Some of dataset's columns are:

        <p></p>

        <ul>
            <li>Restaurant's unique identifier</li>
            <li>Restaurant's name</li>
            <li>Borough in with the restaurant is located</li>
            <li>Restaurant's address</li>
            <li>Cuisine Description</li>
            <li>Violation Description</li>
        </ul>

        <p>Firstly, it would be interesting to see the cuisines that our dataset includes, as well as their popularity.
            Thh bar-chart, as well as the following wordcloud, shows that the american cuisine is the most common
            cuisine
            in NYC. The Chinese, the Italian and the Latin cuisine follow up.</p>

        <p>
            <img src="img/barplot.png" alt="Cuisine Categories">
        </p>

        <!-- Visualization 2 - Wordcloud -->
        <div id="vis2">
            <script src="javascript/v2.js" type="text/javascript"></script>
        </div>

        <p>
            Since we study restaurant inspections results, it will be also interesting to see which are the most common
            violations that restaurant inspectors note. The top three contraventions are:

        </p>

        <p>
        <ul>
            <li> <b>26667</b> of restaurants had non-food contact surface improperly constructed, unacceptable material used,
                non-food contact surface or equipment improperly maintained and/or
                not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides,
                above and underneath the unit.</li>
            <li> <b>18193</b> of restaurants had facilities not vermin proof,
                harborage or conditions conducive to attracting vermin to the premises and/or allowing vermin to exist.</li>
            <li> <b>15287</b> of restaurants had food not protected from potential source
                of contamination during storage, preparation, transportation, display or service.</li>
        </ul>

        </p>


        <br/>

        <div id="wrapper">
        </div>
        <script>
            var categories= ['Unacceptable material used', 'Facilities not vermin proof', 'Food not protected from potential source of contamination during storage'];

            var dollars = [26667, 18193, 15287];

            var colors = ['#0000b4','#2fcab6','#0094ff'];

            var grid = d3.range(25).map(function(i){
                return {'x1':0,'y1':0,'x2':0,'y2':480};
            });

            var tickVals = grid.map(function(d,i){
                if(i>0){ return i*10; }
                else if(i===0){ return "100";}
            });

            var xscale = d3.scale.linear()
                .domain([1,26667])
                .range([10,722]);

            var yscale = d3.scale.linear()
                .domain([0,categories.length])
                .range([10,450]);

            var colorScale = d3.scale.quantize()
                .domain([0,categories.length])
                .range(colors);

            var canvas = d3.select('#wrapper')
                .append('svg')
                .attr({'width':900,'height':450});


            var	xAxis = d3.svg.axis();
            xAxis
                .orient('bottom')
                .scale(xscale);
//                .tickValues(tickVals);

            var	yAxis = d3.svg.axis();
            yAxis
                .orient('right')
                .scale(yscale)
                .tickSize(2)
                .tickFormat(function(d,i){ return categories[i]; })
                .tickValues(d3.range(3));

            var y_xis = canvas.append('g')
                .attr("transform", "translate(150,0)")
                .attr('id','yaxis')
                .call(yAxis);

//            var x_xis = canvas.append('g')
//                .attr("transform", "translate(100,400)")
//                .attr('id','xaxis')
//                .call(xAxis);

            var chart = canvas.append('g')
                .attr("transform", "translate(150,0)")
                .attr('id','bars')
                .selectAll('rect')
                .data(dollars)
                .enter()
                .append('rect')
                .attr('height',80)
                .attr({'x':0,'y':function(d,i){ return yscale(i)+19; }})
                .style('fill',function(d,i){ return colorScale(i); })
                .attr('width',function(d){ return 0; });


            var transit = d3.select("svg").selectAll("rect")
                .data(dollars)
                .transition()
                .duration(10000)
                .attr("width", function(d) {return xscale(d); });

            var transitext = d3.select('#bars')
                .selectAll('text')
                .data(dollars)
                .enter()
                .append('text')
                .attr({'x':function(d) {return xscale(d)-180; },'y':function(d,i){ return yscale(i)+40; }})
                .text(function(d){ return d+" Restaurants"; }).style({'fill':'#fff','font-size':'20px'});


        </script>




        <p>

        </p>

        <br/>

        <p>

        <!-- Visualization 1 - bar chart -->
        <div id="vis1">
            Toggle between the four popular cuisines:
            <button id="buttonAmerican" class="button">American</button>
            <button id="buttonItalian" class="button">Italian</button>
            <button id="buttonChinese" class="button">Chinese</button>
            <button id="buttonLatin" class="button">Latin</button>
            <script src="javascript/v1.js" type="text/javascript"></script>
        </div>

        </p>

            <!-- Visualization 3 - Scatterplot -->

        <p>Click a button to select a year.</p>

        <div>
            <div class="row">
                <div class="col-md-12">
                    <h4 id="dataHeader">Data 2013</h4>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <svg width="100%" height="600" style="overflow: visible;" id="assignment2ASVG"></svg>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <button type="button" class="btn btn-primary col-md-offset-3"
                            onclick="v3Object.buttonClickEvent('Data/v3/data2013.csv')">2013 Data
                    </button>
                </div>
                <div class="col-md-6">
                    <button type="button" class="btn btn-info col-md-offset-3"
                            onclick="v3Object.buttonClickEvent('Data/v3/data2016.csv')">2016 Data
                    </button>
                </div>
            </div>

    </div>
</section>

<!-- jQuery -->
<script src="vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>

<!--&lt;!&ndash; Plugin JavaScript &ndash;&gt;-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"-->
<!--integrity="sha384-mE6eXfrb8jxl0rzJDBRanYqgBxtJ6Unn4/1F7q4xRRyIw7Vdg9jP4ycT7x1iVsgb"-->
<!--crossorigin="anonymous"></script>-->

<!--&lt;!&ndash; Contact Form JavaScript &ndash;&gt;-->
<!--<script src="javascript/jqBootstrapValidation.js"></script>-->
<!--<script src="javascript/contact_me.js"></script>-->

<!-- Theme JavaScript -->
<script src="javascript/agency.min.js"></script>

</body>
</html>