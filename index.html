<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>DOHMH New York City Restaurant Inspection Results</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Theme CSS -->
    <link href="css/agency.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"
            integrity="sha384-0s5Pv64cNZJieYFkXYOTId2HMA2Lfb6q2nAcx2n0RTLUnCAoTTsS0nKEO27XyKcY"
            crossorigin="anonymous"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"
            integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo"
            crossorigin="anonymous"></script>
    <![endif]-->

    <!--<meta charset="UTF-8">-->
    <!--<title>Project Assignment B</title>-->

    <style type="text/css">

        /* Visualization 1 - bar chart */
        @import url(css/v1.css);
        /* Visualization 2 - Wordcloud */
        @import url(css/tipsy.css);

        .box {
            width: 5px;
            height: 5px;
            display: inline-block;
            vertical-align: middle;
            margin-left: 64%;
        }

        .explanation {
            margin-left: 5px;
            vertical-align: middle;
        }

        #light_green {
            background-color: #00ff00;
        }

        #dark_red {
            background-color: #ff0000;
        }

        #blue {
            background-color: #1249ad;
        }

        #boroughs {
            stroke: grey;
            stroke-width: 2px;
            fill: steelblue;
        }

        .axis {
            font: 10px sans-serif;
        }

        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }

    </style>

    <!-- load JS files -->
    <!-- load jquery <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script> -->
    <script src="javascript/jquery.min.js" type="text/javascript"></script>
    <script src="javascript/jquery-ui.min.js" type="text/javascript"></script>
    <!-- tooltip with jquery: http://bl.ocks.org/ilyabo/1373263 -->
    <script src="javascript/jquery.tipsy.js" type="text/javascript"></script>
    <!-- load D3.js for visualization <script src="https://d3js.org/d3.v3.min.js" type="text/javascript"></script> -->
    <script src="javascript/d3.v3.min.js" type="text/javascript"></script>
    <!-- load leaflet.js for map <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js" type="text/javascript"></script> -->
    <!-- can be disabled when using mapbox <script src="js/leaflet.js" type="text/javascript"></script>-->
    <!-- mapbox for nice tiles <script src="https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js" type="text/javascript"></script> -->
    <script src="javascript/mapbox.js" type="text/javascript"></script>
    <!-- load wordcloud -->
    <script src="javascript/d3.layout.cloud.js" type="text/javascript"></script>
    <!-- counting up numbers when scrolling by -->
    <script src="javascript/scrollMonitor.js" type="text/javascript"></script>

</head>
<!--<body>-->

<body id="page-top" class="index">

<!-- Navigation -->
<nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
            </button>
            <a class="navbar-brand page-scroll" href="#page-top">NYC Open Data</a>
        </div>

        <!--Collect the nav links, forms, and other content for toggling-->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="hidden">
                    <a href="#page-top"></a>
                </li>
                <li>
                    <a class="page-scroll" href="#introduction">Introduction</a>
                </li>
                <li>
                    <a class="page-scroll" href="#dataoverview">Data Overview</a>
                </li>
                <li>
                    <a class="page-scroll" href="#predictions">Predictions</a>
                </li>
                <li>
                    <a class="page-scroll" href="#references">References</a>
                </li>
            </ul>
        </div>

    </div>
    <!-- /.container-fluid -->
</nav>

<!-- Header -->
<header>
    <div class="container">
        <div class="intro-text">
            <div class="intro-lead-in">Social Data Analysis and Visualization</div>
            <div class="intro-heading">New York City Restaurant Inspection Results</div>
            <!--<a href="#services" class="page-scroll btn btn-xl">Tell Me More</a>-->
        </div>
    </div>
</header>

<section id="introduction">
    <div class="container">

        <h3>Introduction</h3>

        <br/>

        <p> The New York's New Restaurant Grading System assigns letter grades of A, B, or C depending on
            the number of health code violations recorded in a restaurant's most recent inspection. Restaurants are
            required to post a placard advertising the letter grade in their front window,
            so potential customers can take a look before entering.</p>

        <p>
            There has always been very comprehensive information available online about restaurant inspections
            and violations. But it is also known that few patrons actively seek out this information,
            and thus are in greater danger of contracting food-borne illness from an unclean restaurant.
            The most egregious violators are, of course, promptly shut down by health inspectors until they clean
            up their act. But the poor-performing restaurants that are not closed remain a possible threat to public
            health.
        </p>

        <p>
            <img src="img/opendata.jpg" alt="NYC Open Data" style="width:252px;height:100px;">
        </p>

        <p>
            In the context of the DTU course "Social data analysis and visualization", our group decided to work with
            the publicly available dataset of
            <a href="https://data.cityofnewyork.us/Health/DOHMH-New-York-City-Restaurant-Inspection-Results/rs6k-p7g6">
                "DOHMH New York City Restaurant Inspection Results"</a>, in order to gain
            insight into the quality of NYC restaurants' services. The selected dataset provides restaurant inspections,
            violations, grades and adjudication information.
            Taking advantage of the above tools, we would like to give our stakeholders a complete picture of the
            violations that have been recorded in recent years, and also help them to find the best restaurant
            in terms of hygiene without ignoring their taste preferences.
        </p>

        <p>A more in depth analysis regarding the data can be found in a iPython explainer notebook. Its link can be found
        at the end of this page. </p>


    </div>
</section>

<section id="dataoverview">
    <div class="container">

        <h3>Data Overview</h3>

        <br/>
        Our dataset includes all NYC restaurant violation records from 2012 (423,026 Rows).

        <p></p>

        Its total size is 154.4MB. Some of dataset's columns are:

        <p></p>

        <ul>
            <li>Restaurant's unique identifier</li>
            <li>Restaurant's name</li>
            <li>Borough in with the restaurant is located</li>
            <li>Restaurant's address</li>
            <li>Cuisine Description</li>
            <li>Violation Description</li>
        </ul>

        <p>Firstly, it would be interesting to see the cuisines that our dataset includes, as well as their popularity.
            Thh bar-chart, as well as the following wordcloud, shows that the american cuisine is the most common
            cuisine in NYC. The Chinese, the Italian and the Latin cuisine follow up.</p>

        <p>
            <img src="img/barplot.png" alt="Cuisine Categories">
        </p>

        <br/>



        <div id="vis6">
            <script src="javascript/v6.js" type="text/javascript"></script>
        </div>


        <p>
            Since we study restaurant inspections results, it will be also interesting to see which are the most common
            violations that restaurant inspectors note. The top three contraventions are:

        </p>

        <p>
        <ul>
            <li><b>26667</b> of restaurants had non-food contact surface improperly constructed, unacceptable material
                used,
                non-food contact surface or equipment improperly maintained and/or
                not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides,
                above and underneath the unit.
            </li>
            <li><b>18193</b> of restaurants had facilities not vermin proof,
                harborage or conditions conducive to attracting vermin to the premises and/or allowing vermin to exist.
            </li>
            <li><b>15287</b> of restaurants had food not protected from potential source
                of contamination during storage, preparation, transportation, display or service.
            </li>
        </ul>
        </p>

        <br/>

        <!-- Visualization 4 - bar chart -->

        <div id="vis4">
            <script src="javascript/v4.js" type="text/javascript"></script>
        </div>

        <br/>

        <p>
            The most common words that inspectors wrote during their visits at NYC restaurants the previous 4 years are
            unacceptably
            cleaned <i>surfaces</i>, <i>flies</i>, <i>vermin</i> and inappropriate <i>equipment</i>. It is clear that
            most
            of the violations are associated with places where the customer does not have access. Τherefore, it is
            important
            to inform the public on time. Since we are not sure if all restaurants post their grade at a prominent
            place,
            we are interested in finding NYC areas where the chances for restaurants with low grade are high. Special
            emphasis
            will be also given on the restaurant's violation history and cuisine type.
        </p>

        <br/>

        <!-- Visualization 2 - Wordcloud -->

        <div>
            <font size="+1"><b>Change the subject of the wordcloud: </b></font>
            <select id="opts_v2">
                <option value="wordcloudCuisines" selected="selected">Cuisines</option>
                <option value="wordcloudViolations">Violations</option>
            </select>
        </div>
        <br/>
        <br/>
        <div id="vis2">
            <script src="javascript/v2.js" type="text/javascript"></script>
        </div>

        <p>
            For the top four cuisines we are able to see if restaurants showed some progress. It is always useful to
            check
            if the restaurant managers complied after inspectors' visits. From the bar-chart that follows, it can be
            noticed
            that American and Chinese restaurants showed some improvement. Italian restaurants show similar patterns
            over the last 4 years. Finally, Latin restaurants show a small increase on grade C reports, a phenomenon
            that
            should be taken into consideration if you plan to visit those restaurants!
        </p>

        <p>

            <!-- Visualization 1 - bar chart -->
        <div id="vis1">
            Toggle between the four popular cuisines:
            <button id="buttonAmerican" class="button">American</button>
            <button id="buttonItalian" class="button">Italian</button>
            <button id="buttonChinese" class="button">Chinese</button>
            <button id="buttonLatin" class="button">Latin</button>
            <script src="javascript/v1.js" type="text/javascript"></script>
        </div>

        </p>

        <p>
            From the scatter-plot below, we have noticed that inspections have become more intense during the last two -
            three years. Circles' size shows the total number of inspections that were proceeded at the relevant time
            period.
        </p>

        <!-- Visualization 3 - Scatterplot -->

        <p>Click a button to select a year.</p>


        <div id="vis3">

            <div class="row">
                <div class="col-md-12">
                    <h4 id="dataHeader">Data 2016</h4>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <svg width=950 height="550" style="overflow: visible;" id="scatterplot"></svg>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6 col-md-6">
                    <button type="button" class="btn btn-primary col-md-offset-3"
                            onclick="v3Object.buttonClickEvent('Data/v3/data2013.csv')">2013 Data
                    </button>
                </div>
                <div class="col-md-6 col-xs-6">
                    <button type="button" class="btn btn-primary col-md-offset-3 col-xs-offset-6"
                            onclick="v3Object.buttonClickEvent('Data/v3/data2016.csv')">2016 Data
                    </button>
                </div>
            </div>
            <script type="text/javascript" src="javascript/v3.js"></script>

        </div>

    </div>


</section>

<section id="predictions">

    <div class="container">

        <h3>Where should I go to eat?</h3>

        <p>
            The dataset shows us the inspections results of all five boroughs of NYC for the last 5 years. If we want to
            define areas where it would be more likely to find a restaurant with low grade, the K-NN is the solution.
            We decided to work with the unbalanced map, since it would be more interesting to investigate real spatial
            and temporal crime probabilities. The original heat maps give us the crime distribution that is formerly
            observed, and the conclusions that will be made using the KNN algorithm will represent reality,
            since they will be based on true crimes' density.</p>

        <p>From the results it is obvious that there are some "dangerous" areas that we should avoid. More
            specifically:</p>

        <p>
        <ul>
            <li>The most popular borough of NYC, namely Manhattan, has mostly restaurants with good grades. It is a safe
                choice!
            </li>
            <li>New Jersey, which is located southwest, is without any doubt an area where we will probably find more
                vermin than usual!
            </li>
            <li>The districts of Hackensack, Teaneck and Englewood are also very dangerous (red area in the north). Even
                with the
                increase of the number of K, KNN still shows us that we should be careful with restaurants located
                around that area.
            </li>
            <li>
                Finally, visitors of Brooklyn should also try to find the letter grades that are posted outside each
                restaurant, because
                the chances of finding a place with inappropriately stored or cooked food are high.
            </li>
        </ul>
        </p>

        <!-- Visualization 5 - KNN Map -->
        <p>

        </p>

        <div class="container">
            <h4 id="dataHeader2"">K-nearest neighbors Map</h4>
        </div>

        <br/>


        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Neighbors
                <span class="caret"></span></button>
            <ul class="dropdown-menu">
                <li><a onclick="document.getElementById('myImage').src='Data/v5/k3.png'">K=3</a></li>
                <li><a onclick="document.getElementById('myImage').src='Data/v5/k5.png'">K=5</a></li>
                <li><a onclick="document.getElementById('myImage').src='Data/v5/k10.png'">K=10</a></li>
                <li><a onclick="document.getElementById('myImage').src='Data/v5/k30.png'">K=30</a></li>
            </ul>
        </div>


        <div id="knnmap">
            <img id="myImage" src="Data/v5/k3.png"
                 style="width:80%; border: 3px solid #0fad21; margin-bottom: 15px; margin-top: 30px">
        </div>

        <div id="light_green" class="box"></div>
        <span class="explanation">- Grade A Restaurants</span>
        <br>
        <div id="dark_red" class="box"></div>
        <span class="explanation">- Grade B Restaurants</span>
        <br>
        <div id="blue" class="box"></div>
        <span class="explanation">- Grade C Restaurants</span>
    </div>
</section>

<section id="references">
    <div class="container">

        <h3>Links</h3>

        <br/>

Used Dataset:
        <a href="https://data.cityofnewyork.us/Health/DOHMH-New-York-City-Restaurant-Inspection-Results/rs6k-p7g6"
           target="_blank">New York City Inspection Results</a>

        <br/>
        New York City Inspection Results - Data Analysis:
        <a href="http://nbviewer.jupyter.org/gist/GiannisKav/870b2fb23d7bb94bfa1dc8fce4a1b244"
           target="_blank">IPython Notebook</a>

        <br/>
        <br/>

        <h3>Technical Comments</h3>
        <p>Everything was kept in one HTML document to keep the overview. Javascript files are all in one separate file
            for each visualization. Finally, all data files are in a separate folder that can be easily accessed using
            inspection tools.
    </div>
</section>

<!-- jQuery -->
<script src="vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>

<!-- Theme JavaScript -->
<script src="javascript/agency.min.js"></script>

</body>
</html>